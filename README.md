# Telegram Bot —Å –∞–≤—Ç–æ–æ–ø–ª–∞—Ç–æ–π —á–µ—Ä–µ–∑ Kaspi Pay

<div align="center">

![Telegram Bot](https://img.shields.io/badge/Telegram-Bot-blue?logo=telegram)
![Kaspi Pay](https://img.shields.io/badge/Payment-Kaspi%20Pay-red)
![Python](https://img.shields.io/badge/Python-3.8+-yellow?logo=python)
![License](https://img.shields.io/badge/License-MIT-green)

</div>

<p align="center">
  <img src="https://via.placeholder.com/600x300?text=Kaspi+Course+Bot" alt="Kaspi Course Bot Demo" width="600">
</p>

## üìã –û–±–∑–æ—Ä

–ë–æ—Ç –¥–ª—è Telegram —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Kaspi Pay, –ø–æ—ç—Ç–∞–ø–Ω—ã–º –æ—Ç–∫—Ä—ã—Ç–∏–µ–º —É—Ä–æ–∫–æ–≤ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

<div align="center">

| üîÑ | üìö | üìä | üõ†Ô∏è |
|:---:|:---:|:---:|:---:|
| **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–ª–∞—Ç–µ–∂–∏** —á–µ—Ä–µ–∑ Kaspi Pay | **–ü–æ—ç—Ç–∞–ø–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ —É—Ä–æ–∫–æ–≤** –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π | **–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** —É—á–µ–Ω–∏–∫–æ–≤ | **MVC –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è |

</div>

## üõ†Ô∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

<table align="center">
  <tr>
    <td align="center"><img src="https://via.placeholder.com/50?text=Python" width="50"/><br>Python 3.8+</td>
    <td align="center"><img src="https://via.placeholder.com/50?text=aiogram" width="50"/><br>aiogram</td>
    <td align="center"><img src="https://via.placeholder.com/50?text=SQLite" width="50"/><br>SQLite</td>
    <td align="center"><img src="https://via.placeholder.com/50?text=aiohttp" width="50"/><br>aiohttp</td>
    <td align="center"><img src="https://via.placeholder.com/50?text=Kaspi" width="50"/><br>Kaspi Pay API</td>
  </tr>
</table>

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8 –∏–ª–∏ –≤—ã—à–µ
- [Telegram Bot Token](https://core.telegram.org/bots#3-how-do-i-create-a-bot) –æ—Ç @BotFather
- –ê–∫–∫–∞—É–Ω—Ç –≤ —Å–∏—Å—Ç–µ–º–µ Kaspi Pay –∏ API-–∫–ª—é—á–∏ (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏)

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/yourusername/kaspi-course-bot.git
cd kaspi-course-bot
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv venv
source venv/bin/activate  # –î–ª—è Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # –î–ª—è Windows
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```ini
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–µ–ª–µ–≥—Ä–∞–º_—Ç–æ–∫–µ–Ω
KASPI_API_KEY=–≤–∞—à_–∫–ª—é—á_kaspi_api
KASPI_MERCHANT_ID=–≤–∞—à_id_–º–µ—Ä—á–∞–Ω—Ç–∞_kaspi
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python run.py
```

## üõ†Ô∏è –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

–ë–æ—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö:

<table>
  <tr>
    <th>–†–µ–∂–∏–º</th>
    <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
    <th>–ù–∞—Å—Ç—Ä–æ–π–∫–∞</th>
  </tr>
  <tr>
    <td><strong>polling</strong></td>
    <td>–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</td>
    <td>–£–∫–∞–∑–∞–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ <code>.env.example</code></td>
  </tr>
  <tr>
    <td><strong>webhook</strong></td>
    <td>–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω</td>
    <td>–¢—Ä–µ–±—É–µ—Ç SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</td>
  </tr>
</table>

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ —Ä–µ–∂–∏–º–µ webhook –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

```ini
DEVELOPMENT_MODE=webhook
WEBHOOK_HOST=example.com
WEBHOOK_PORT=8443
WEBHOOK_SSL_CERT=–ø—É—Ç—å_–∫_ssl_—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É
WEBHOOK_SSL_PRIV=–ø—É—Ç—å_–∫_ssl_–∫–ª—é—á—É
```

## ‚òÅÔ∏è –î–µ–ø–ª–æ–π –Ω–∞ Heroku

```bash
heroku create
git push heroku main
heroku ps:scale web=1
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
kaspi_course_bot/
‚îÇ
‚îú‚îÄ‚îÄ init.py                 # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ run.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ Procfile                # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Heroku
‚îÇ
‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ settings.py         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ models/                 # –ú–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ base.py             # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ lesson.py           # –ú–æ–¥–µ–ª—å —É—Ä–æ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ payment.py          # –ú–æ–¥–µ–ª—å –ø–ª–∞—Ç–µ–∂–∞
‚îÇ   ‚îî‚îÄ‚îÄ user.py             # –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ
‚îú‚îÄ‚îÄ controllers/            # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ payment_controller.py
‚îÇ   ‚îú‚îÄ‚îÄ lesson_controller.py
‚îÇ   ‚îî‚îÄ‚îÄ user_controller.py
‚îÇ
‚îú‚îÄ‚îÄ views/                  # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py        # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ messages.py         # –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ services/               # –°–µ—Ä–≤–∏—Å—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ database.py         # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ kaspi_service.py    # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Kaspi API
‚îÇ   ‚îî‚îÄ‚îÄ bot_service.py      # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API
‚îÇ
‚îú‚îÄ‚îÄ tests/                  # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py         # –§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_payment.py     # –¢–µ—Å—Ç—ã –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ test_lessons.py     # –¢–µ—Å—Ç—ã —É—Ä–æ–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ test_user.py        # –¢–µ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ
‚îî‚îÄ‚îÄ db/                     # –§–∞–π–ª—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ migrations/         # SQL-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π
    ‚îî‚îÄ‚îÄ seeds/              # –î–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î
```

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
pytest
```

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å –æ—Ç—á–µ—Ç–æ–º –æ –ø–æ–∫—Ä—ã—Ç–∏–∏:

```bash
pytest --cov=.
```

## üîß –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `services/database.py` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `seed_test_data()`.

## üí≤ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kaspi Pay

<div align="center">

| –®–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|:---:|:---|
| 1Ô∏è‚É£ | –ü–æ–ª—É—á–∏—Ç–µ API-–∫–ª—é—á–∏ –∏ ID –º–µ—Ä—á–∞–Ω—Ç–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Kaspi Pay |
| 2Ô∏è‚É£ | –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–ª–∞—Ç–µ–∂–∞—Ö (URL: `/webhook/kaspi`) |
| 3Ô∏è‚É£ | –ó–∞–º–µ–Ω–∏—Ç–µ URL –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ `services/kaspi_service.py` –Ω–∞ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ |

</div>

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –î–∞–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —è–≤–ª—è–µ—Ç—Å—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º –ø—Ä–∏–º–µ—Ä–æ–º. –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

<table>
  <tr>
    <td>üîê</td>
    <td>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å API-–∫–ª—é—á–∏</td>
  </tr>
  <tr>
    <td>‚úÖ</td>
    <td>–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–ª–∞—Ç–µ–∂–µ–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞</td>
  </tr>
  <tr>
    <td>üîí</td>
    <td>–ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL –¥–ª—è webhook-–æ–≤</td>
  </tr>
  <tr>
    <td>üíæ</td>
    <td>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, MySQL)</td>
  </tr>
</table>

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–í–∫–ª–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–¥–µ–∏ –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:

1. –°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ä–∫ –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É —Å –≤–∞—à–µ–π —Ñ–∏—á–µ–π (`git checkout -b feature/amazing-feature`)
3. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–º–∏—Ç —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ (`git commit -m '–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ–∏—á–∞'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–∞—à —Ñ–æ—Ä–∫ (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

<div align="center">
  
  [![GitHub](https://img.shields.io/badge/GitHub-yourusername-181717?logo=github&style=for-the-badge)](https://github.com/yourusername)
  [![Email](https://img.shields.io/badge/Email-email%40example.com-D14836?logo=gmail&style=for-the-badge)](mailto:email@example.com)
  [![Telegram](https://img.shields.io/badge/Telegram-username-2CA5E0?logo=telegram&style=for-the-badge)](https://t.me/username)

</div>

---

<div align="center">
  
  ‚≠ê –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∑–≤–µ–∑–¥—É, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è! ‚≠ê

</div>
